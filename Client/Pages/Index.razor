@page "/"
@using System.ComponentModel.DataAnnotations;
@using Pokerino.Shared.Entities;
@inject HttpClient Http

<PageTitle>Index</PageTitle>

<div class="py-8 sm:py-10 lg:pb-10">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <div class="mx-auto max-w-2xl text-center">
            <h1 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-6xl">
                <span class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">Pokerino</span>
            </h1>
            <p class="mt-2 text-xl font-extralight text-gray-600 dark:text-gray-400">The best scrum poker app in the galaxy</p>
        </div>
    </div>
</div>

<div class="flex gap-4 px-4 md:px-12 lg:px-32">
    <ActionPanel>
        <Title>Create a room</Title>
        <Description>
            Host a room and invite your colleagues to play some
            <span class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400 pl-0.5">Pokerino</span>!
        </Description>
        <Body>
            <EditForm Model="room" class="mt-5 flex flex-col space-between" OnValidSubmit="@HandleCreateRoom">
                <div class="space-y-3">
                    <InputTextField Label="Room Name" ShowLabel="@true" Placeholder="Enter the room name..." @bind-Value="@room.Name" />
                    <InputTextField Label="Room ID" ShowLabel="@true" Placeholder="Enter the room ID..." @bind-Value="@room.PublicId" />
                </div>
                <Field Class="mt-4">
                    <Blazorise.Button Type="ButtonType.Submit" Color="Color.Primary">
                        Let's play some
                        <span class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400 pl-1">Pokerino</span>!
                    </Blazorise.Button>
                </Field>
            </EditForm>
        </Body>
    </ActionPanel>
    <ActionPanel>
        <Title>Join a room</Title>
        <Description>
            Join a room and rock some
            <span class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400 pl-0.5">Pokerino</span>!
        </Description>
        <Body>
            <EditForm Model="joinRoom" class="mt-5 flex flex-col justify-between flex-grow" OnValidSubmit="@HandleJoinRoom">
                <DataAnnotationsValidator />
                <div class="space-y-3">
                    <InputTextField Label="Room ID" ShowLabel="@true" Placeholder="Enter the room ID..." @bind-Value="@joinRoom.Id" />
                </div>
                <Field Class="mt-4">
                    <Blazorise.Button Type="ButtonType.Submit" Color="Color.Primary">
                        Let's go!
                    </Blazorise.Button>
                </Field>
            </EditForm>
        </Body>
    </ActionPanel>
</div>

@code
{
    private Pokerino.Shared.Entities.Room room = new Pokerino.Shared.Entities.Room();
    private RoomJoinForm joinRoom = new();

    public class RoomJoinForm
    {
        [Required(ErrorMessage = "Id is required if you want to join a room.")]
        [StringLength(50, MinimumLength = 8, ErrorMessage = "Id must be between 8 and 50 characters.")]
        public string? Id { get; set; }
    }

    private void HandleCreateRoom()
    {

    }

    private void HandleJoinRoom()
    {

    }
}